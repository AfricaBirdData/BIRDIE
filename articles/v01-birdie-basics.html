<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>BIRDIE: Basics • BIRDIE</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="BIRDIE: Basics">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">BIRDIE</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.0.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/v01-birdie-basics.html">BIRDIE: Basics</a></li>
    <li><a class="dropdown-item" href="../articles/v02-birdie-spp-abundance.html">BIRDIE: Species abundance</a></li>
    <li><a class="dropdown-item" href="../articles/v03-birdie-spp-distributions.html">BIRDIE: Species distributions</a></li>
    <li><a class="dropdown-item" href="../articles/v04-birdie-abu-data-prep.html">BIRDIE ABU: Data preparation</a></li>
    <li><a class="dropdown-item" href="../articles/v05-birdie-abu-model-fitting.html">BIRDIE ABU: Model fitting</a></li>
    <li><a class="dropdown-item" href="../articles/v06-birdie-abu-model-diagnostics.html">BIRDIE ABU: Model diagnostics</a></li>
    <li><a class="dropdown-item" href="../articles/v07-birdie-abu-model-summary.html">BIRDIE ABU: Model summary</a></li>
    <li><a class="dropdown-item" href="../articles/v08-birdie-dst-data-prep.html">BIRDIE DST: Data preparation</a></li>
    <li><a class="dropdown-item" href="../articles/v09-birdie-dst-model-fitting.html">BIRDIE DST: Model fitting</a></li>
    <li><a class="dropdown-item" href="../articles/v10-birdie-dst-diagnostics.html">BIRDIE DST: Model diagnostics</a></li>
    <li><a class="dropdown-item" href="../articles/v11-birdie-dst-model-summary.html">BIRDIE DST: Model summary</a></li>
  </ul>
</li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>BIRDIE: Basics</h1>
            
      

      <div class="d-none name"><code>v01-birdie-basics.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="introduction">Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h2>
<p>BIRDIE is a biodiversity data pipeline for wetlands and waterbirds,
and it is organized as an R package with some additional tools and
elements.</p>
<p>BIRDIE is a high-level utility, and therefore it has quite a few
dependencies, notably: the <code>ABAP</code>, <code>CWAC</code> and
<code>ABDtools</code> packages, which provide the functionality needed
to acquire data from the main databases used by the pipeline. The
pipeline also makes heavy use of some of the <code>tidyverse</code>
packages, such as <code>dplyr</code> and <code>tidyr</code>, as well as
the <code>sf</code> and <code>raster</code> packages to handle spatial
data. It also uses packages for fitting occupancy and state-space models
such as <code>spOccupancy</code> and <code>jagsUI</code>,
respectively.</p>
<p>The main objective of the pipeline is to process ABAP and CWAC data
into meaningful waterbird abundance and distribution estimates.
Therefore, the code is organized in two main modules: abundance (ABU1)
and distribution (DST1). These modules have four distinct steps each:
data preparation, model fit, model diagnostics and model summary. Inside
each of these modules there are multiple functions that perform
different tasks. This results in a hierarchical structure that we
describe later. The important thing to keep in mind for now is that
there are high-level functions that control whole modules, and there are
other lower-level functions that perform tasks within each module.</p>
<p>Note that the BIRDIE pipeline can run locally on our personal machine
or remotely, in a dedicated server. To be able to transfer the
functionality to multiple environments we need to keep some structure in
the directories we use to store data, models, outputs and scripts.</p>
<p>Make an intro for users that might want to modify the pipeline
Explain who is the intended user for this documentation</p>
</div>
<div class="section level2">
<h2 id="directory-structure">Directory structure<a class="anchor" aria-label="anchor" href="#directory-structure"></a>
</h2>
<p>The BIRDIE repository has the typical structure of an R package,
because it is indeed an R package, with a few additional
directories.</p>
<ul>
<li>The directories: <code>R</code>, <code>data</code>, <code>man</code>
and <code>vignettes</code>, are standard R-package directories</li>
<li>
<code>beta</code> is a place to test new functionality and it can
get quite messy</li>
<li>
<code>deprecated</code> has functions that were used at some point
but that are not longer used. These may be deleted periodically.</li>
<li>
<code>analysis</code> is a space where we store all the data (those
that don’t come with the package), scripts and outputs that the pipeline
uses or produces.</li>
<li>
<code>comms</code> contains the code used in BIRDIE presentations,
papers and other communications.</li>
</ul>
<p>The structure of the BIRDIE root directory is important for the
repository to work as a package. Maintaining the structure of the
<code>analysis</code> directory is also important, because it allows us
to use the pipeline in different machines and find what we need.</p>
<p>In particular, there are some sub-directories: <code>data</code>,
<code>output</code>, <code>models</code> and <code>scripts</code> that
are needed to be able to run the pipeline. Some pipeline functions use
paths to these directories, so it is important to keep these names
unchanged. We can configure the pipeline through the
<code><a href="../reference/configPipeline.html">configPipeline()</a></code> function to let it know what the full path
to these directories is (from the home directory in our computer). We
will see more of this later.</p>
<p>The <code>analysis/output</code> directory is important because it
will store all of our model outputs. Inside of this directory we need
sub-directories named with the SAFRING code (ABAP and CWAC code) of each
of the species we want to run the pipeline for. For example, if we
wanted to run the pipeline for species 6 (Little Grebe) we would need to
have a directory <code>analisys/output/6</code> before running the
pipeline. Inside of <code>analysis/output</code> we also need two other
directories: <code>analysis/reports</code> and
<code>analysis/export</code>. The first one will be used to store
different report files created by the pipeline and the second one stores
the outputs that will be transferred to the BIRDIE database.</p>
</div>
<div class="section level2">
<h2 id="types-of-functions">Types of functions<a class="anchor" aria-label="anchor" href="#types-of-functions"></a>
</h2>
<p>There are two basic types of functions in the BIRDIE package:</p>
<ul>
<li><p>Pipeline functions: the name of these functions start with
<code>ppl_</code> and they control the flow of the pipeline. In other
words, their role is to execute other functions that run specific steps
for data processing, such as preparing data or running models. Pipeline
functions don’t do any data processing per se other than reading and
writing to disk. The pipeline functions correspond roughly to the main
pipeline modules: species distribution and species abundance, and with
the different processing steps of the pipeline: prepare data, fit
models, diagnose fits and summarise results. There will be at least one
pipeline function for each of these modules and steps.</p></li>
<li><p>Processing functions: they don’t have any naming convention other
that they don’t start with <code>ppl_</code>. These are the core
workforce functions of the package and they run the different
data-processing steps of the pipeline. These functions are divided into
two groups, those that need a specific package to run (e.g.,
<code>JAGS</code> or <code>spOccupancy</code>) and those that are
package “agnostic” and can be used regardless of what package the
pipeline is using at the moment. Package-specific functions are all
packaged under the same file named <code>utils-packagename.R</code>. We
made this distinction to facilitate the modularity of the pipeline. If
we were to substitute a package used in the pipeline it will be easier
to find all the functions that we need to replace if they are all in the
same file. So far we have utils for the packages:<code>jags</code>,
<code>spOccupancy</code> and <code>occuR</code>. There are some generic
utils as well. These functions are used for administrative tasks, such
as producing log files, setting up file paths or managing export
files.</p></li>
</ul>
<p>Another way of looking at this distinction is thinking that “pipeline
functions” don’t really have any value out of the BIRDIE pipeline,
because they perform configuration tasks for the pipeline. Conversely,
non-pipeline functions could also be used in other settings and would
still be useful (e.g., they could be used to annotate data with
environmental variables or to fit models).</p>
<p>NOTE: This is the general idea, but there might be a few things that
are missplaced or that could be better organized, so don’t take this
structure as carved in stone!</p>
</div>
<div class="section level2">
<h2 id="control-scripts">Control scripts<a class="anchor" aria-label="anchor" href="#control-scripts"></a>
</h2>
<p>While BIRDIE functions do all the heavy lifting, we have set up a few
scripts that allow the user to start specific pipeline workflows. The
main scripts are:</p>
<ul>
<li>
<code>pipeline_script_dst.R</code> that initialises the distribution
module</li>
<li>
<code>pipeline_script_abu.R</code> that initialises the abundance
module</li>
</ul>
<p>There is a useful script that allows running the distribution module
parallelising computations over species (currently, up until model
fitting) named <code>pipeline_script_dst_parall.R</code>. There are some
other useful scripts (that might get outdated) under the
<code>scripts/misc</code> directories.</p>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by BIRDIE Development Team.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer>
</div>





  </body>
</html>
