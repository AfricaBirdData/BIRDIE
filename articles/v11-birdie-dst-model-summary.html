<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="BIRDIE">
<title>BIRDIE DST: Model summary • BIRDIE</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.11/clipboard.min.js" integrity="sha512-7O5pXpc0oCRrxk8RUfDYFgn0nO1t+jLuIOQdOMRp4APB7uZ4vSjspzp5y6YDtDs4VzUSTbWzBFZ/LKJhnyFOKw==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="BIRDIE DST: Model summary">
<meta property="og:description" content="BIRDIE">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light" data-bs-theme="light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">BIRDIE</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.0.9000</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/v01-birdie-basics.html">BIRDIE: Basics</a>
    <a class="dropdown-item" href="../articles/v02-birdie-spp-abundance.html">BIRDIE: Species abundance</a>
    <a class="dropdown-item" href="../articles/v03-birdie-spp-distributions.html">BIRDIE: Species distributions</a>
    <a class="dropdown-item" href="../articles/v04-birdie-abu-data-prep.html">BIRDIE ABU: Data preparation</a>
    <a class="dropdown-item" href="../articles/v05-birdie-abu-model-fitting.html">BIRDIE ABU: Model fitting</a>
    <a class="dropdown-item" href="../articles/v06-birdie-abu-model-diagnostics.html">BIRDIE ABU: Model diagnostics</a>
    <a class="dropdown-item" href="../articles/v07-birdie-abu-model-summary.html">BIRDIE ABU: Model summary</a>
    <a class="dropdown-item" href="../articles/v08-birdie-dst-data-prep.html">BIRDIE DST: Data preparation</a>
    <a class="dropdown-item" href="../articles/v09-birdie-dst-model-fitting.html">BIRDIE DST: Model fitting</a>
    <a class="dropdown-item" href="../articles/v10-birdie-dst-diagnostics.html">BIRDIE DST: Model diagnostics</a>
    <a class="dropdown-item" href="../articles/v11-birdie-dst-model-summary.html">BIRDIE DST: Model summary</a>
  </div>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav"></ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>BIRDIE DST: Model summary</h1>
            
      
      
      <div class="d-none name"><code>v11-birdie-dst-model-summary.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="introduction">Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h2>
<p>The species distributions module (DST) of the BIRDIE pipeline has
four main steps: data preparation, model fitting, model diagnostics and
model summary. See the <em>BIRDIE: basics</em> and <em>BIRDIE: species
distributions</em> vignettes for general details about BIRDIE and about
the DST module, respectively. In this vignette, we will go through the
different tasks that are performed during the step of the DST module:
<strong>model summary</strong>.</p>
<p>The main function used for summarising a model fit is
<code><a href="../reference/ppl_summarise_occu.html">ppl_summarise_occu()</a></code>. This is a <code>ppl_</code> function,
and therefore it doesn’t do much processing itself (see <em>BIRDIE:
basics</em> if this is confusing), but it does call the right functions
to do the work.</p>
<p>This step is relatively simple. Here we need to conduct two tasks:
predict occurrence and detection probabilities for all pentads in South
Africa from a fitted model and summarise these predictions.</p>
</div>
<div class="section level2">
<h2 id="predicting-from-a-model-fit">Predicting from a model fit<a class="anchor" aria-label="anchor" href="#predicting-from-a-model-fit"></a>
</h2>
<p><code><a href="../reference/predictSpOccu.html">predictSpOccu()</a></code> is used for predicting from a model fit
and it is basically a wrapper around
<code><a href="https://www.jeffdoser.com/files/spoccupancy-web/reference/predict.PGOcc.html" class="external-link">spOccupancy::predict.PGOcc()</a></code>. However, it has a few data
preparation steps to make sure the data we pass on to the predict
function has the same variables and on the same scale as the data we
used for fitting the model. Model are fitted using only those pentads
that were visited in any given year, but we want to predict for all
pentads in South Africa. To maintain the same scale, we make use of the
covariate scale information that we stored in the model fit object (see
<em>BIRDIE DST: model fitting</em> vignette).</p>
<p>The output of <code><a href="../reference/predictSpOccu.html">predictSpOccu()</a></code> is a list with two
elements containing posterior predictive samples for <span class="math inline">\(\psi\)</span> (psi, probability of occurrence) and
<span class="math inline">\(p\)</span> (probability of detection) for
each pentad.</p>
</div>
<div class="section level2">
<h2 id="summarising-predictions">Summarising predictions<a class="anchor" aria-label="anchor" href="#summarising-predictions"></a>
</h2>
<p>In this step, we use the function <code><a href="../reference/summariseSpOccu.html">summariseSpOccu()</a></code> to
extract the 0.025, 0.5 and 0.975 quantiles of the predictive samples for
<span class="math inline">\(\psi\)</span> and <span class="math inline">\(p\)</span> obtained from
<code><a href="../reference/predictSpOccu.html">predictSpOccu()</a></code>. We will store these quantiles to display
on the BIRDIE website rather than all of the posterior predictive
samples.</p>
<p>We also compute the realized occupancy from the posterior predictive
samples and the data. The realized occupancy is the probability of
occurrence conditional on the observed data, such that</p>
<p><span class="math display">\[P[occu | obs = 1] = 1\]</span> <span class="math display">\[P[occu | obs = 0] = \frac{\psi q}{(1 - \psi +
\psi q)}\]</span> where <span class="math inline">\(obs = 1\)</span>
when the species was detected at a site on any visit, and <span class="math inline">\(obs = 0\)</span> when the species was not detected
at a site on any visit, <span class="math inline">\(\psi\)</span> is the
probability of occurrence estimated by our model and <span class="math inline">\(q = \prod_{i=1}^N (1 - p_i)\)</span>, with <span class="math inline">\(p_i\)</span> being the probability of detection on
visit <span class="math inline">\(i\)</span> and <span class="math inline">\(N\)</span> the total number of visits to a given
site.</p>
<p>All these summaries are stored in a file called
<code>analysis/output/occu_pred_spOccupancy_YYYY_sp_code.csv</code>,
where <code>YYYY</code> is the year of the data we are fitting a model
to and <code>sp_code</code> is the species code. These files will be
exported to the database for storage and display on the BIRDIE
website.</p>
<p>If no model could be fitted because of lack of enough data, then, we
use the raw data to create the prediction file mentioned above The file
still has the exact same structure, but now <span class="math inline">\(\psi\)</span> and <span class="math inline">\(p\)</span> will be <code>NA</code> for all pentads
(because they could not be calculated). Raw data will be treated as
realized occupancy and no confidence limits will be estimated. The
function that performs these tasks is
<code><a href="../reference/createPredFromAbap.html">createPredFromAbap()</a></code>.</p>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by BIRDIE Development Team.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.9.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
